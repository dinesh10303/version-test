name: sample

on:
 push: 
  branches: [feature/*]

jobs:
  artifact-version:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Get Version
      uses: entimaniac/read-pom-version-action@1.0.0
      id: getVersion
    
    - name: run_number
      run: echo v${{github.run_number}}

    outputs:
      version: ${{ steps.getVersion.outputs.version }}
  
  test:
    needs: artifact-version
    runs-on: ubuntu-latest
    environment: test
    steps:
    - name: Get Version
      uses: entimaniac/read-pom-version-action@1.0.0
      id: getVersion
  
  sample:
    needs: [test,artifact-version]
    runs-on: ubuntu-latest
    environment: sample
    steps:
    - name: testing
      run: |
        echo ${{ needs.artifact-version.outputs.version }}
        echo ${{github.run_number}}

    #